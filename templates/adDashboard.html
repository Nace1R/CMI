    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CMI City - Admin</title>
    <script src="https://unpkg.com/vue@3"></script>
    <script src="https://unpkg.com/naive-ui"></script>
    <link rel="stylesheet" href="https://unpkg.com/naive-ui/dist/naive-ui.css" />
    <link rel="stylesheet" href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
        font-family: 'Poppins', sans-serif;
        margin: 0;
        padding: 0;
        }
        .navbar {
        height: 64px;
        background-color: white;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 20px;
        }
        .username {
        font-weight: 500;
        color: #333;
        cursor: pointer;
        }
        .back-button {
        margin-top: 20px;
        background-color: #1B365C;
        color: white;
        border-radius: 8px;
        padding: 8px 16px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        transition: all 0.2s ease;
        }
        .back-button:hover {
        background-color: #2A4A7C;
        }
    </style>
    </head>
    <body>
    <div id="app">
        <div class="navbar">
        <div><strong>CMI Admin Dashboard</strong></div>
        <div>
            <n-dropdown :options="UserOptions" @select="handleSelect">
            <n-button><span class="username">{{ userData.ime }}</span></n-button>
            </n-dropdown>
            <n-avatar round size="medium" src="{{ pfp }}"></n-avatar>
        </div>
        </div>

        <h1 style="margin-left: 20px;">Welcome admin <u>{{ userData.ime }}</u>!</h1>

        <n-button @click="goBack" class="back-button">
        <template #icon>
            <i class="las la-arrow-left" style="margin-right: 5px;"></i>
        </template>
        Back to Dashboard
        </n-button>

        <div class="modal1">
        <!--Modal za polle zaenkrat mi se ne dela tko kot je treba da je form noter-->
        <h3>Manage Polls</h3>
        <n-button @click="showPollModal = true">Create Poll</n-button>

        <n-modal v-model:show="showPollModal" title="Create a new poll">
        <template #default>
            <n-form>
                <n-form-item label="Poll Title">
                    <n-input v-model:value="pollTitle" placeholder="Enter poll title" />
                </n-form-item>
                <n-form-item label="Poll Description">
                    <n-input v-model:value="pollDescription" placeholder="Enter poll's description" />
                </n-form-item>
                <n-form-item label="Poll Duration">
                    <n-input number v-model:value="pollDuration" :min="1" />
                </n-form-item>
            </n-form>

        </template>
        <template #action>
            <n-button @click="handleConfirmPolls">Save changes</n-button>
            <n-button type="primary" @click="handleCancelPolls">Discard changes</n-button>
        </template>
        </n-modal>

        </div>
        <div class="modal2">
        <!--MODAL za evente ampak se ne prikaze se rabim najt tezavo-->
        <h3>Manage Events</h3>
        <n-button @click="showEventModal = true">Create Event</n-button>

        <n-modal
        v-model:show="showEventModal"
        preset="dialog"
        title="Create a new event"
        content="Are you sure?"
        positive-text="Save"
        negative-text="Discard"
        @positive-click="handleConfirmEvents"
        @negative-click="handleCancelEvents"
        />
        </div>
        <div class="modal3">
        <!--Modal za rewards-->
        <h3>Manage Rewards</h3>
        <n-button @click="showRewardModal = true">Create Reward</n-button>

        <n-modal
        v-model:show="showRewardModal"
        preset="dialog"
        title="Create a new reward"
        content="Are you sure?"
        positive-text="Save"
        negative-text="Discard"
        @positive-click="handleConfirmRewards"
        @negative-click="handleCancelRewards"
        />
            </div>


    </div>





    <script>
        const { createApp, ref } = Vue;
        const { createDiscreteApi } = naive;



        createApp({
        setup() {
            const showPollModal = ref(false);
            const showEventModal = ref(false);
            const showRewardModal = ref(false);
            const { message } = createDiscreteApi(['message']);


            //SPREMENLJIVKE ZA POLL
            const pollTitle = ref("");
            const pollDescription = ref("");
            const pollDuration = ref(50);

            //SPREMENLJIVKE ZA EVENTS
            const eventTitle = ref("");
            const eventDescription = ref("");


            const userData = ref({
            ime: 'Admin User',
            email: 'admin@example.com'
            });

            const UserOptions = ref([
            { label: 'Manage Profile', key: 'manageProfile' }
            ]);

            const isAdmin = "{{ 'true' if isAdmin else 'false' }}" === 'true';
            if (isAdmin) {
            UserOptions.value.push({ label: 'Admin Dashboard', key: 'adminPanel' });
            }

            UserOptions.value.push({ label: 'Logout', key: 'logout' });

            const handleSelect = (key) => {
            if (key === 'manageProfile') window.location.href = '/manageProfile';
            else if (key === 'logout') window.location.href = '/logout';
            else if (key === 'adminPanel') window.location.href = '/adminDashboard';
            };
            //ZAENKRAT SAMO HANDLAM CONFIRME ZA EVENTE IN POLLE REWARDI PRIDEJO NA KONCU
            const handleConfirmPolls = () => {
            message.success('Confirmed!');
            showPollModal.value = false;
            };

            const handleConfirmEvents = () => {
            message.success('Confirmed!');
            showEventModal.value = false;
            };

            const handleConfirmRewards = () => {
            message.success('Confirmed!');
            showRewardModal.value = false;
            };
            //ZAENKRAT SAMO HANDLAM CANCELE ZA POLLE IN EVENTE IN REWARDE
            const handleCancelPolls = () => {
            message.info('Cancelled');
            showPollModal.value = false;
            };

            const handleCancelEvents = () => {
            message.info('Cancelled');
            showPollModal.value = false;
            };

            const handleCancelRewards = () => {
            message.info('Cancelled');
            showRewardModal.value = false;
            };

            const goBack = () => {
            window.location.href = '/dashboard';
            };

            return {
                showPollModal,
                showEventModal,
                showRewardModal,
                userData,
                UserOptions,
                handleSelect,
                handleConfirmPolls,
                handleConfirmEvents,
                handleConfirmRewards,
                handleCancelPolls,
                handleCancelEvents,
                handleCancelRewards,
                goBack
            };
        }
        }).use(naive).mount('#app');
    </script>
    </body>
    </html>
